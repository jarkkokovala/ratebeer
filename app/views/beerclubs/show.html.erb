<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @beerclub.name %>
</p>

<p>
  <strong>Founded:</strong>
  <%= @beerclub.founded %>
</p>

<p>
  <strong>City:</strong>
  <%= @beerclub.city %>
</p>

<p>
  <% if @beerclub.users.empty? %>
    <strong>No members yet</strong>
  <% else %>
    <strong>Members:</strong>
    <% @beerclub.users.each do |user| %>
      <%= link_to user.username, user %>
    <% end %>
  <% end %>
</p>

<% if current_user %>
  <p>
  <% if current_user.beerclubs.any? && current_user.beerclubs.find(@beerclub.id) %>
    You are member of this club.
    <%= form_for(current_user.memberships.find_by(beerclub_id: @beerclub.id), method: "delete") do |f| %>
      <%= f.hidden_field :beerclub_id %>
      <%= f.submit value: "end the membership" %>
    <% end %>
  <% else %>
    <%= form_for(@membership) do |f| %>
      <%= f.hidden_field :beerclub_id %>
      <%= f.submit value:"join the club" %>
    <% end %>
  <% end %>
  </p>

  <%= link_to 'Destroy', @beerclub, method: :delete, data: { confirm: 'Are you sure?' } %></td>
<% end %>

<%= link_to 'Edit', edit_beerclub_path(@beerclub) if current_user %> |
<%= link_to 'Back', beerclubs_path %>
